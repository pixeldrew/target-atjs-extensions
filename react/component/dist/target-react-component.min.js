/**
* Copyright 2016 Adobe Systems, Inc. http://www.adobe.com
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*  http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("babel-runtime/helpers/classCallCheck"),require("babel-runtime/helpers/createClass"),require("babel-runtime/helpers/possibleConstructorReturn"),require("babel-runtime/helpers/inherits"),require("babel-runtime/helpers/extends"),require("lodash/isEqual"),require("lodash/includes"));else if("function"==typeof define&&define.amd)define(["babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","babel-runtime/helpers/possibleConstructorReturn","babel-runtime/helpers/inherits","babel-runtime/helpers/extends","lodash/isEqual","lodash/includes"],t);else{var r="object"==typeof exports?t(require("babel-runtime/helpers/classCallCheck"),require("babel-runtime/helpers/createClass"),require("babel-runtime/helpers/possibleConstructorReturn"),require("babel-runtime/helpers/inherits"),require("babel-runtime/helpers/extends"),require("lodash/isEqual"),require("lodash/includes")):t(e["babel-runtime/helpers/classCallCheck"],e["babel-runtime/helpers/createClass"],e["babel-runtime/helpers/possibleConstructorReturn"],e["babel-runtime/helpers/inherits"],e["babel-runtime/helpers/extends"],e["lodash/isEqual"],e["lodash/includes"]);for(var a in r)("object"==typeof exports?exports:e)[a]=r[a]}}(this,function(e,t,r,a,o,n,i){return function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=function(t){function r(e){(0,i.default)(this,r);var t=(0,d.default)(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.logger=console,t.queryParams=location.search,t}return(0,p.default)(r,t),(0,u.default)(r,[{key:"render",value:function(){return(0,m.onRender)(e,this)}},{key:"componentDidMount",value:function(){return(0,m.onComponentMounted)(this,this.logger)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(e){return(0,m.onComponentWillReceiveProps)(this,this.logger,e)}}]),r}(e.Component);return r.defaultProps=(0,m.getDefaultProps)(t),r}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=a(n),s=r(2),u=a(s),l=r(3),d=a(l),c=r(4),p=a(c);t.default=o;var m=r(5)},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("babel-runtime/helpers/inherits")},function(e,t,r){function a(e,t){if(!e.targetState.initialized)return void t.error("at-react-component:","window.adobe.target namespace is missing");var r=window.adobe.target;r.getOffer({mbox:e.targetState.mbox,params:e.targetState.atParams,timeout:e.targetState.timeout,success:function(t){r.applyOffer({mbox:e.targetState.mbox,offer:t,selector:e.targetDiv}),e.targetDiv.className=(0,d.removeMboxClass)(e.targetDiv.className)},error:function(r,a){t.error("getOffer error: ",a,r),e.targetDiv.className=(0,d.removeMboxClass)(e.targetDiv.className)}})}function o(e){return e=e||{},{className:"mboxDefault","data-mbox":e.mbox||"default-mbox","data-timeout":e.timeout||3e3}}function n(e,t){return t.targetState={initialized:Boolean(window.adobe&&window.adobe.target),editMode:-1!==t.queryParams.indexOf("mboxEdit")},t.targetState.initialized?e.createElement("div",(0,l.default)({ref:function(e){t.targetDiv=e}},t.props,{className:(0,d.appendMboxClass)(t)}),t.props.children):e.createElement("div",t.props,t.props.children)}function i(e,t){if(!e.targetState.initialized)return void t.error("at-react-component:","window.adobe.target namespace is missing");var r=e.targetState;if(r.atParams=(0,d.getParams)(e.props),r.mbox=e.props["data-mbox"],r.timeout=parseInt(e.props["data-timeout"],10),"default-mbox"===r.mbox)return void t.error("at-react-component:","mbox prop must be provided for each Target component!");r.editMode||a(e,t)}function s(e,t,r){if(!e.targetState.initialized)return void t.error("at-react-component:","window.adobe.target namespace is missing");var o=r["data-mbox"],n=parseInt(r["data-timeout"],10),i=(0,d.getParams)(r);if((0,d.haveOptionsChanged)(e,o,n,i)){var s=e.targetState;s.atParams=i||s.atParams,s.mbox=o||s.mbox,s.timeout=n||s.timeout,s.editMode||a(e,t)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(6),l=function(e){return e&&e.__esModule?e:{default:e}}(u);t.getOffers=a,t.getDefaultProps=o,t.onRender=n,t.onComponentMounted=i,t.onComponentWillReceiveProps=s;var d=r(7)},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t,r){function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.props.className,r=e.props["data-mbox"];return e.targetState.editMode?"mbox-name-"+r:-1===t.indexOf("mboxDefault")?(t?t+" ":"")+"mboxDefault":t}function n(e){return e.replace(/\bmboxDefault\b/,"")}function i(e){e=e||{};var t=null;return Object.keys(e).filter(function(e){return 0===e.indexOf("data-")&&!(0,c.default)(["data-mbox","data-timeout"],e)}).forEach(function(r,a){0===a&&(t={}),t[r.substring(5)]=e[r]}),t}function s(e,t,r,a){var o=e.targetState;return!(0,l.default)(o.atParams,a)||t&&o.mbox!==t||r&&o.timeout!==r}Object.defineProperty(t,"__esModule",{value:!0});var u=r(8),l=a(u),d=r(9),c=a(d);t.appendMboxClass=o,t.removeMboxClass=n,t.getParams=i,t.haveOptionsChanged=s},function(e,t){e.exports=require("lodash/isEqual")},function(e,t){e.exports=require("lodash/includes")}])});